**Заказчик исследования:** Интернет-магазин «В один клик».

**Цель проекта:** разработать решение, которое позволит персонализировать предложения постоянным клиентам, чтобы увеличить их покупательскую активность.

**Полученные данные:** данные о поведении покупателя на сайте, о коммуникациях с покупателем и его продуктовом поведении и о прибыли, которую получает магазин от продаж каждому покупателю за последние 3 мес.

**План работы:**
1. Изучить полученные данные - обработать пропуски, выявить и устранить аномалии и пропуски в данных.
2. Изучить корреляции и связи между признаками.
3. Обучить несколько моделей. Выбрать лучшую модель по подходящей метрике с помощью пайплайнов.
4. Проанализировать важность признаков лучшей модели. Выработать рекомендации для компании на основе анализа признаков.
5. Сегментировать покупателей и сделать предложения по работе с сегментом для увеличения покупательской активности.

**Результаты предобработки данных**

При исследовании данных были обнаружены следующие выбросы:

- в датафрейме с данными о прибыли с клиентов обраружен клиент с нетиписным размером выручки - более 100 тыс. руб., данный клиент был удален из выборки.

Больше отсутствующих / дублирующихся / анамальных данных не было обнаружено.

**Обучение и результаты моделей**

С помощью паплайна было обучено 4 модели для покупательной активности - KNN, дерево решений, логистическая регрессия и SVC:
1. Категориальные данные были преобразованы с помощью OneHotEncoder, количественные переменные масштабированы с помощью нескольких методов - StandardScaler, MinMaxScaler и без масштабирования.
2. Во всех перечисленных моделях с помошью пайплайна и перебиралось несколько гиперпараметров.
3. В качесве метрики выбрана матрика ROC-AUC в связи с тем, что нам необходимо оценить качество работы модели вне зависимости от выбранного порога вероятности, целевой признак не сбалансирован (60% на 40%) и у нас не стоит задачи не допускать ошибки FN или FP.

Лучшая модель была найдена с помощью рандомизированного поиска:
- лучшая модель - логистическая регрессия с гиперпараметрами: регуляризация - l1, сила регуляризвции - С=3, solver=liblinear (т.к. выборка небольшая).
- метрика ROC-AUC на тренировочной выборке 0,90, на тестовой 0,86 - хороший показатель.

**Итог**

*Общий вывод:*
1. Чем больше объем неоплаченных продуктов у клиента, тем выше вероятность, что его покупательская активность снизится - после добавления товаров в корзину покапатель может не оформить заказ по разным причинам, например: не устроила стоимость / срок / время доставки, доставка не работаем по необходимомму адресу, возникли проблемы с оформлением заказа (долгая регистрация / неудобная авторизация), долгий / неудобный процесс оплаты, клиент не видит полной стоимости корзины товаров до его оформления.

Рекомендации для компании: 
- максимально упростить процесс оформления и оплаты заказа (оформление без регистрации / разнае способы оплаты) 
- до оформления заказа уведомлять клиента о сроках и стоимости доставки 
- показывать клиенту итоговую стоимость корзины выбранных товаров.
2. Выявлена следующая зависимость у выручки: чем выше выручка от клиента препредыдущем месяце тем выше вероятность того, что покупательская активность клиента останется на прежнем уровне, при этом чем выручка в предыдущем месяце тем выше вероятность того, что покупательская активность клиента снизится. Вероятно это связано с тем, что у клиентов компании в среднем лаг между покупками 1 месяц. 

Рекомендации для компании: 
- увеличивать базу постоянных клиентов путем рекламы / соц.сетей / положительных отзывов на сайте.
3. чем выше у клиента доля покупок товаров по акциям, тем выше вероятность снижения покупательской активности. Скорее всего это связано с тем, что акции на товары распространяются на непродолжительный срок и клиенты, которые покупали товар по акции не готовы его покупать по полной цене. 

Рекомендации для компании: 
- Для клиентов с высокой долей покупок по акциям разработать программу лояльности, таким образом увеличить их покупательскую активность.

*Вывод для клиентов с высокой долей покупок по акциям:*
1. Клиенты покупающие категории товаров длительного пользования с большой вороятностью снизят свою покупальную активность.

Рекомендации для компании: 
- давать рекламу товаров кратковременного пользования и привлекать клиентов скадками на данные товары.
2. Если клиент не оплатил более 5 товаров, то вероятность снижения покупательской активности практически 100%. Это может быть связано с тем, что клиент добавил товары в корзину в ожидании скидок на данные товары и не оплачивает их до появления скидок.

Рекомендации для компании:
- направлять таким клиентам спустя некоторое время (1-3 дня) предложение купить выбранные, но неоплаченные товары, с некоторой скидкой.